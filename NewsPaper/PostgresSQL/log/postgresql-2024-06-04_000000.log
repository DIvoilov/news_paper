2024-06-06 19:47:31.369 +07 [11832] РћРЁРР‘РљРђ:  РѕС€РёР±РєР° СЃРёРЅС‚Р°РєСЃРёСЃР° (РїСЂРёРјРµСЂРЅРѕРµ РїРѕР»РѕР¶РµРЅРёРµ: "INTOcategories") (СЃРёРјРІРѕР» 1195)
2024-06-06 19:47:31.369 +07 [11832] РћРџР•Р РђРўРћР :  DROP TABLE IF EXISTS products_categories, products,
		categories,manufacturers, vendors;
	CREATE TABLE vendors (
	    id BIGSERIAL PRIMARY KEY,
	    name TEXT NOT NULL
	);
	
	CREATE TABLE manufacturers (
	    id BIGSERIAL PRIMARY KEY,
	    name TEXT NOT NULL,
	    website TEXT
	);
	
	CREATE TABLE categories (
	    id BIGSERIAL PRIMARY KEY,
	    name TEXT NOT NULL
	);
	
	-- РЎРѕР·РґР°РЅРёРµ С‚Р°Р±Р»РёС†С‹ "РўРѕРІР°СЂС‹".
	CREATE TABLE products (
	    id BIGSERIAL PRIMARY KEY, -- РїРµСЂРІРёС‡РЅС‹Р№ РєР»СЋС‡
	    name TEXT NOT NULL, -- РЅР°Р·РІР°РЅРёРµ С‚РѕРІР°СЂР°
	    price INT CHECK(price > 0), -- С†РµРЅР° (РіР°СЂР°РЅС‚РёСЂСѓРµС‚СЃСЏ, С‡С‚Рѕ С†РµРЅР° > 0)
	    vendor_id BIGINT REFERENCES vendors(id), -- СЃСЃС‹Р»РєР° РЅР° РїСЂРѕРґР°РІС†Р°
	    manufacturer_id BIGINT REFERENCES manufacturers(id) -- СЃСЃС‹Р»РєР° РЅР° РїСЂРѕРёР·РІРѕРґРёС‚РµР»СЏ
	);
	-- РЎРѕР·РґР°РЅРёРµ РёРЅРґРµРєСЃР° РґР»СЏ СѓСЃРєРѕСЂРµРЅРёСЏ РїРѕРёСЃРєР° РїРѕ РЅР°Р·РІР°РЅРёСЋ С‚РѕРІР°СЂР°.
	CREATE INDEX product_name_idx ON products(name);
	
	CREATE TABLE products_categories (
	    id BIGSERIAL PRIMARY KEY,
	    product_id BIGINT REFERENCES products(id),    
	    category_id BIGINT REFERENCES categories(id)
	);
	
	-- РћС‡РёСЃС‚РєР° РІСЃРµС… С‚Р°Р±Р»РёС† РїРµСЂРµРґ РЅР°РїРѕР»РЅРµРЅРёРµРј С‚РµСЃС‚РѕРІС‹РјРё РґР°РЅРЅС‹РјРё.
	TRUNCATE TABLE products_categories, categories,
		manufacturers, vendors, products;
	
	-- РќР°РїРѕР»РЅРµРЅРёРµ С‚Р°Р±Р»РёС† С‚РµСЃС‚РѕРІС‹РјРё РґР°РЅРЅС‹РјРё.
	INSERT INTOcategories(name) VALUES
	    ('РњСѓР·С‹РєР°Р»СЊРЅС‹Рµ РёРЅСЃС‚СЂСѓРјРµРЅС‚С‹'), ('РџСЂРѕС„РµСЃСЃРёРѕРЅР°Р»СЊРЅРѕРµ РјСѓР·С‹РєР°Р»СЊРЅРѕРµ РѕР±РѕСЂСѓРґРѕРІР°РЅРёРµ'), ('Р›СЋР±РёС‚РµР»СЊСЃРєРѕРµ РјСѓР·С‹РєР°Р»СЊРЅРѕРµ РѕР±РѕСЂСѓРґРѕРІР°РЅРёРµ');
	INSERT INTO vendors(name) VALUES('РњСѓР·С‚РѕСЂРі'), ('4 С‡РµС‚РІРµСЂС‚Рё');
	INSERT INTOmanufacturers(name, website) VALUES
	    ('Fender
	    ', 'fender.com'), ('Gibson','gibson.com'), ('Roland', 'roland.com');
	INSERT INTO products(name, price,  vendor_id, manufacturer_id) VALUES
	    ('Fender Stratocaster', 3500000, 2, 1),
	    ('Fender Telecaster', 3900000, 2, 1),
	    ('Fender Bullet', 1200000, 2, 1),
	    ('Gibson Les Paul', 5700000, 1, 2);
	INSERT INTO products_categories(product_id, category_id) VALUES
	    (1, 1), (1, 2), (3, 1), (3, 3);
2024-06-06 19:52:05.990 +07 [14068] СООБЩЕНИЕ:  начата контрольная точка: time
2024-06-06 19:52:20.038 +07 [14068] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 113 (0.7%); добавлено файлов WAL 0, удалено: 0, переработано: 0; запись=12.540 сек., синхр.=1.029 сек., всего=14.049 сек.; синхронизировано_файлов=66, самая_долгая_синхр.=0.034 сек., средняя=0.016 сек.; расстояние=555 kB, ожидалось=1928 kB; lsn=0/309E360, lsn redo=0/309E328
2024-06-12 17:17:55.141 +07 [14068] СООБЩЕНИЕ:  начата контрольная точка: time
2024-06-12 17:18:14.285 +07 [13400] ВАЖНО:  пользователь "admin" не прошёл проверку подлинности (по паролю)
2024-06-12 17:18:14.285 +07 [13400] ПОДРОБНОСТИ:  Роль "admin" не существует.
	Подключение соответствует строке 122 в "E:/PostgresSQL/pg_hba.conf": "host    all             all             ::1/128                 scram-sha-256"
2024-06-12 17:18:14.327 +07 [14876] ВАЖНО:  пользователь "admin" не прошёл проверку подлинности (по паролю)
2024-06-12 17:18:14.327 +07 [14876] ПОДРОБНОСТИ:  Роль "admin" не существует.
	Подключение соответствует строке 122 в "E:/PostgresSQL/pg_hba.conf": "host    all             all             ::1/128                 scram-sha-256"
2024-06-12 17:19:49.959 +07 [14068] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 973 (5.9%); добавлено файлов WAL 0, удалено: 0, переработано: 0; запись=108.884 сек., синхр.=5.565 сек., всего=114.818 сек.; синхронизировано_файлов=300, самая_долгая_синхр.=0.087 сек., средняя=0.019 сек.; расстояние=4564 kB, ожидалось=4564 kB; lsn=0/3513478, lsn redo=0/3513440
2024-06-12 17:27:55.973 +07 [14068] СООБЩЕНИЕ:  начата контрольная точка: time
2024-06-12 17:28:10.875 +07 [14068] СООБЩЕНИЕ:  контрольная точка завершена: записано буферов: 120 (0.7%); добавлено файлов WAL 0, удалено: 0, переработано: 0; запись=13.325 сек., синхр.=1.092 сек., всего=14.902 сек.; синхронизировано_файлов=98, самая_долгая_синхр.=0.042 сек., средняя=0.012 сек.; расстояние=479 kB, ожидалось=4155 kB; lsn=0/358B330, lsn redo=0/358B2F8
